{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst PUBLIC_FILE = /\\.(.*)$/;\r\nconst locales = ['en', 'ru'];\r\nconst defaultLocale = 'en';\r\n\r\nfunction getLocale(request: NextRequest): string {\r\n    const acceptLanguage = request.headers.get('accept-language');\r\n    const lang = acceptLanguage?.split(',')?.[0]?.split('-')[0];\r\n    return locales.includes(lang || '') ? lang! : defaultLocale;\r\n}\r\n\r\nexport function middleware(request: NextRequest) {\r\n    const { pathname } = request.nextUrl;\r\n\r\n    if (\r\n        pathname.startsWith('/_next') ||\r\n        pathname.startsWith('/api') ||\r\n        PUBLIC_FILE.test(pathname)\r\n    ) {\r\n        return NextResponse.next();\r\n    }\r\n\r\n    // если уже есть язык в пути — ничего не делаем\r\n    const matchedLocale = locales.find((locale) =>\r\n        pathname.startsWith(`/${locale}`)\r\n    );\r\n    if (matchedLocale) {\r\n        // добавим заголовок, чтобы layout мог прочитать\r\n        const response = NextResponse.next();\r\n        response.headers.set('x-current-locale', matchedLocale);\r\n        return response;\r\n    }\r\n\r\n    const locale = getLocale(request);\r\n    const url = request.nextUrl.clone();\r\n    url.pathname = `/${locale}${pathname}`;\r\n\r\n    return NextResponse.redirect(url);\r\n}\r\n\r\nexport const config = {\r\n    matcher: ['/((?!_next|api|favicon.svg|.*\\\\..*).*)'],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,UAAU;IAAC;IAAM;CAAK;AAC5B,MAAM,gBAAgB;AAEtB,SAAS,UAAU,OAAoB;IACnC,MAAM,iBAAiB,QAAQ,OAAO,CAAC,GAAG,CAAC;IAC3C,MAAM,OAAO,gBAAgB,MAAM,MAAM,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;IAC3D,OAAO,QAAQ,QAAQ,CAAC,QAAQ,MAAM,OAAQ;AAClD;AAEO,SAAS,WAAW,OAAoB;IAC3C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,IACI,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,WACpB,YAAY,IAAI,CAAC,WACnB;QACE,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;IAC5B;IAEA,+CAA+C;IAC/C,MAAM,gBAAgB,QAAQ,IAAI,CAAC,CAAC,SAChC,SAAS,UAAU,CAAC,CAAC,CAAC,EAAE,QAAQ;IAEpC,IAAI,eAAe;QACf,gDAAgD;QAChD,MAAM,WAAW,6LAAA,CAAA,eAAY,CAAC,IAAI;QAClC,SAAS,OAAO,CAAC,GAAG,CAAC,oBAAoB;QACzC,OAAO;IACX;IAEA,MAAM,SAAS,UAAU;IACzB,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;IACjC,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAE,SAAS,UAAU;IAEtC,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC;AACjC;AAEO,MAAM,SAAS;IAClB,SAAS;QAAC;KAAyC;AACvD"}}]
}